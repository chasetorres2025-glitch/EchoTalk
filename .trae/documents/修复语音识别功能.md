## 语音识别功能修复计划

### 问题分析
1. 阿里云百炼的语音识别 API 不支持直接上传二进制文件
2. 需要提供可通过公网访问的音频文件 URL
3. API 是异步任务系统，需要：提交任务 → 等待/轮询 → 获取结果

### 解决方案
**方案：使用 dashscope SDK（推荐）**
- SDK 已经封装了异步任务的复杂性
- 支持本地文件上传（SDK 内部处理上传）
- 自动轮询等待结果

### 实施步骤
1. 修改 `bailian_client.py` 的 `speech_to_text` 方法
2. 使用 dashscope SDK 的 `Transcription` 类
3. 实现本地文件上传 → 异步识别 → 获取结果的完整流程
4. 添加错误处理和超时机制

### 代码修改
```python
from dashscope.audio.asr import Transcription
import dashscope

def speech_to_text(self, audio_file_path):
    dashscope.api_key = self.api_key
    
    # 异步提交任务
    task_response = Transcription.async_call(
        model='paraformer-v2',
        file_urls=[audio_file_path]  # SDK 会处理本地文件上传
    )
    
    # 等待任务完成
    result = Transcription.wait(task=task_response.output.task_id)
    
    # 解析结果
    if result.status_code == 200:
        # 获取识别文字
        return 解析结果...
```

### 注意事项
- 录音文件识别是异步任务，可能需要等待几秒到几分钟
- 需要先上传文件到临时存储，获取 URL
- 在生产环境建议使用阿里云 OSS 存储文件

请确认此计划后，我将立即实施修复。